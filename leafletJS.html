<html>
	<head>
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
		<style>
			#map { height: 600px; }
		</style>
	</head>
	<body>
		<div id="map"></div>
		<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
        <!-- <script src="levees.js" type="text/javascript"></script> -->
        <script src="levees.js" type="text/javascript"></script>
        <script src="http://leafletjs.com/examples/us-states.js" type="text/javascript"></script>
		<script>
			//var map = L.map('map').setView([40.5, -105], 13);
			var map = L.map('map').setView([38.4, -90.1], 13);
			L.tileLayer('http://{s}.tile.cloudmade.com/10d9f8e4181a5b2888c2aca2114fa09c/997/256/{z}/{x}/{y}.png', {
				attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
				maxZoom: 18
			}).addTo(map);
            
            var marker = L.marker([40.5, -105]).addTo(map);
            
            var circle = L.circle([40.508, -105.02], 500, {
                color: 'red',
                fillColor: '#f03',
                fillOpacity: 0.5
            }).addTo(map);
            
            var polygon = L.polygon([
                [40.509, -105.08],
                [40.503, -105.06],
                [40.51, -105.047]
            ]).addTo(map);

            marker.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();
            circle.bindPopup("I am a circle.");
            polygon.bindPopup("I am a polygon.");

            var popup = L.popup()
                .setLatLng([40.5, -105.09])
                .setContent("I am a standalone popup.")
                .openOn(map);
    
            // Using GeoJSON with Leaflet
			var geojsonFeature = {
				"type": "Feature",
				"properties": {
					"name": "Coors Field",
					"amenity": "Baseball Stadium",
					"popupContent": "This is where the Rockies play!"
				},
				"geometry": {
					"type": "Point",
					"coordinates": [-104.99404, 39.75621]
				}
			};
            
            //L.geoJson(geojsonFeature).addTo(map);
            
			var myLayer = L.geoJson().addTo(map);
			myLayer.addData(geojsonFeature);
            
            // style option
			var myLines = [{
				"type": "LineString",
				"coordinates": [[-100, 40], [-105, 45], [-110, 55]]
			}, {
				"type": "LineString",
				"coordinates": [[-105, 40], [-110, 45], [-115, 55]]
			}];

			var myStyle = {
				"color": "#00ff00", // "#ff7800", // orange
				"weight": 5,
				"opacity": 0.65
			};

			L.geoJson(levees, { // myLines, {
				style: myStyle
			}).addTo(map);
            
            var states = [{
                "type": "Feature",
                "properties": {"party": "Republican"},
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[
                        [-104.05, 48.99],
                        [-97.22,  48.98],
                        [-96.58,  45.94],
                        [-104.03, 45.94],
                        [-104.05, 48.99]
                    ]]
                }
            }, {
                "type": "Feature",
                "properties": {"party": "Democrat"},
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[
                        [-109.05, 41.00],
                        [-102.06, 40.99],
                        [-102.03, 36.99],
                        [-109.04, 36.99],
                        [-109.05, 41.00]
                    ]]
                }
            }];

            L.geoJson(statesData, {
                style: function(feature) {
                    switch (feature.properties.party) {
                        case 'Republican': return {color: "#ff0000"};
                        case 'Democrat':   return {color: "#0000ff"};
                    }
                }
            }).addTo(map);
            
			map.setView([38.8, -90.5], 13);

            // FUNCTIONS:
            function onMapClick(e) {
                //alert("You clicked the map at " + e.latlng);
                popup
                    .setLatLng(e.latlng)
                    .setContent("You clicked the map at " + e.latlng.toString())
                    .openOn(map);
                    
                // Here we're using the pointToLayer option to create a CircleMarker
                var geojsonMarkerOptions = {
                    radius: 8,
                    fillColor: "#ff7800",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 0.8
                };

                //var someGeojsonFeature = [];
                
                //L.geoJson(someGeojsonFeature, {
                //    pointToLayer: function (feature, e.latlng) {
                //        return L.circleMarker(latlng, geojsonMarkerOptions);
                //    }
                //}).addTo(map);
            }

            map.on('click', onMapClick);
		</script>
	</body>
</html>
